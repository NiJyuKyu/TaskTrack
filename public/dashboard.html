<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskTrack</title>
    <link rel="stylesheet" href="dashboard.css">
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">
                <div class="tasktrack">TaskTrack</div>
            </div>
            <ul class="nav">
                <li class="nav-item active" data-page="overview">
                    <i class="fas fa-list"></i>
                    Overview
                </li>
                <li class="nav-item" data-page="calendar">
                    <i class="fas fa-calendar-alt"></i>
                    Calendar
                </li>
                <li class="nav-item" data-page="activity">
                    <i class="fas fa-history"></i>
                    Activity/History
                </li>
                <li class="nav-item" data-page="tasks">
                    <i class="fas fa-tasks"></i>
                    Tasks
                </li>
                <div class="sidebar-notes">
                    <h2>Notes</h2>
                    <div class="note-item">
                        <h3>Apr 2, 2023</h3>
                        <p>Hi Good Morning</p>
                    </div>
                </div>
            </ul>
            <div class="profile">
                <img src="" alt="Profile Picture" id="profile-pic" class="profile-pic">
                <div class="profile-info">
                    <span id="profile-name" class="profile-name"></span>
                    <div class="dropdown">
                        <button class="dropbtn">Profile Options</button>
                        <div class="dropdown-content">
                            <a href="#" id="edit-profile">Edit Profile</a>
                            <a href="#" id="settings">Settings</a>
                            <a href="#" id="logout">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="editProfileModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Edit Profile</h2>
                <form id="editProfileForm">
                    <div class="form-group">
                        <label for="username">Username:</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="profilePicture">Profile Picture:</label>
                        <input type="file" id="profilePicture" name="profilePicture" accept="image/*">
                    </div>
                    <div class="form-group">
                        <label for="newPassword">New Password:</label>
                        <input type="password" id="newPassword" name="newPassword">
                    </div>
                    <button type="submit" class="btn-save">Save Changes</button>
                </form>
            </div>
        </div>
        <div class="main-content">
            <div class="header">
                <div class="project-title">
                    <div class="project-name">Inventory System</div>
                    <div class="project-details">
                        <div class="project-status">Projects</div>
                        <div class="project-status">Team projects</div>
                        <div class="project-status">Incomplete</div>
                    </div>
                </div>
                <div class="options">
                    <i class="fas fa-ellipsis-h"></i>
                </div>
            </div>
            <div class="project-overview" id="overview-page">
                <div class="project-info">
                    <div class="project-header">
                        <div class="project-name">Cloth</div>
                        <div class="project-description">Small and Concise headline</div>
                    </div>
                    <div class="project-details">
                        <div class="detail-item">
                            <label>Created At</label>
                            <span>May, 15 2022 14:23 PM</span>
                        </div>
                        <div class="detail-item">
                            <label>Created</label>
                            <span>Mar 23, 10:34 PM</span>
                        </div>
                        <div class="detail-item">
                            <label>Deadline</label>
                            <span>Jun 02, 04:01PM</span>
                        </div>
                        <div class="detail-item">
                            <label>Tracked Time</label>
                            <span>10H 32M</span>
                        </div>
                    </div>
                    <div class="project-description">
                        TaskTrack is an intuitive task management system designed to help teams collaborate and manage their projects with ease. It offers powerful features such as task tracking, project organization, scheduling, and communication tools to keep teams organized and on top of their projects.
                    </div>
                </div>
                <div class="project-sidebar">
                    <div class="sidebar-item">
                        <label>Tags</label>
                        <div class="tag-list">
                            <span class="tag">Profitable</span>
                            <span class="tag">Ai</span>
                            <span class="tag">1 Person</span>
                        </div>
                    </div>
                    <div class="sidebar-item">
                        <label>Assign</label>
                        <span class="assignee">@mustafa</span>
                    </div>
                    <div class="sidebar-item">
                        <label>Group</label>
                        <div class="group-list">
                            <span class="group">Team projects</span>
                            <span class="group">Fashion</span>
                        </div>
                    </div>
                    <div class="sidebar-item">
                        <label>Priority</label>
                        <span class="priority">Small</span>
                    </div>
                </div>
            </div>
            <div class="project-calendar" id="calendar-page" style="display: none;">
                <div id="calendar"></div>
            </div>
            <div class="project-activity" id="activity-page" style="display: none;">
                <!-- Activity content -->
            </div>
            <div class="project-tasks" id="tasks-page" style="display: none;">
                <h2>Tasks</h2>
                <div class="task-list">
                    <!-- Task items will be dynamically added here -->
                </div>
                <button id="add-task-btn">Add Task</button>
            </div>
            <div class="project-projects" id="projects-page" style="display: none;">
                <div class="projects-header">
                    <h2>Projects</h2>
                    <i class="fas fa-plus-circle"></i>
                </div>
                <ul class="projects-list">
                    <li class="project-item" data-project="flower-shop">
                        <div class="project-icon"><i class="fas fa-flower"></i></div>
                        <div class="project-name">Flower Shop</div>
                        <div class="project-progress">23</div>
                    </li>
                    <li class="project-item" data-project="cloth">
                        <div class="project-icon"><i class="fas fa-tshirt"></i></div>
                        <div class="project-name">Cloth</div>
                        <div class="project-progress">345</div>
                    </li>
                    <li class="project-item" data-project="gamer-boy">
                        <div class="project-icon"><i class="fas fa-gamepad"></i></div>
                        <div class="project-name">Gamer Boy</div>
                        <div class="project-progress">568</div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="sidebar right-sidebar">
            <div class="sidebar-header">
                <h2>To Do Lists</h2>
                <i class="fas fa-plus-circle" id="add-to-do-btn"></i>
            </div>
            <ul class="sidebar-list" id="to-do-list">
                <li class="sidebar-item">
                    <input type="checkbox" checked>
                    <label>Donate $500 to the charity</label>
                    <span class="sidebar-date">May 20, 2020</span>
                    <span class="sidebar-tag">Donations</span>
                    <button class="delete-to-do">Delete</button>
                </li>
                <li class="sidebar-item">
                    <input type="checkbox">
                    <label>Do 500 pushups</label>
                    <span class="sidebar-date">May 20, 2020</span>
                    <span class="sidebar-tag">Sport</span>
                    <button class="delete-to-do">Delete</button>
                </li>
                <li class="sidebar-item">
                    <input type="checkbox" checked>
                    <label>Buy new headset</label>
                    <span class="sidebar-date">May 20, 2020</span>
                    <span class="sidebar-tag">Shopping</span>
                    <button class="delete-to-do">Delete</button>
                </li>
                <li class="sidebar-item">
                    <input type="checkbox">
                    <label>Submit Assignment</label>
                    <span class="sidebar-date">May 20, 2020</span>
                    <span class="sidebar-tag">Education</span>
                    <button class="delete-to-do">Delete</button>
                </li>
            </ul>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the calendar
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth'
            });
            calendar.render();

            // Sidebar navigation
            const navItems = document.querySelectorAll('.nav-item');
            const pages = {
                overview: document.getElementById('overview-page'),
                calendar: document.getElementById('calendar-page'),
                activity: document.getElementById('activity-page'),
                tasks: document.getElementById('tasks-page'),
                projects: document.getElementById('projects-page')
            };

            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');

                    for (const page in pages) {
                        pages[page].style.display = 'none';
                    }
                    const selectedPage = item.getAttribute('data-page');
                    pages[selectedPage].style.display = 'block';
                });
            });

            // Edit profile modal
            const editProfileModal = document.getElementById('editProfileModal');
            const editProfileBtn = document.getElementById('edit-profile');
            const closeEditProfileModal = editProfileModal.querySelector('.close');

            editProfileBtn.addEventListener('click', function() {
                editProfileModal.style.display = 'block';
            });

            closeEditProfileModal.addEventListener('click', function() {
                editProfileModal.style.display = 'none';
            });

            window.addEventListener('click', function(e) {
                if (e.target == editProfileModal) {
                    editProfileModal.style.display = 'none';
                }
            });

            // Handle add to-do modal
            const addToDoBtn = document.getElementById('add-to-do-btn');
            const addToDoModal = document.getElementById('addToDoModal');
            const closeAddToDoModal = addToDoModal.querySelector('.close');
            const addToDoForm = document.getElementById('addToDoForm');
            const toDoList = document.getElementById('to-do-list');

            addToDoBtn.addEventListener('click', function() {
                addToDoModal.style.display = 'block';
            });

            closeAddToDoModal.addEventListener('click', function() {
                addToDoModal.style.display = 'none';
            });

            window.addEventListener('click', function(e) {
                if (e.target == addToDoModal) {
                    addToDoModal.style.display = 'none';
                }
            });

            addToDoForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const toDoText = document.getElementById('toDoText').value;
                const toDoDate = document.getElementById('toDoDate').value;
                const toDoTag = document.getElementById('toDoTag').value;

                const toDoItem = document.createElement('li');
                toDoItem.className = 'sidebar-item';
                toDoItem.innerHTML = `
                    <input type="checkbox">
                    <label>${toDoText}</label>
                    <span class="sidebar-date">${toDoDate}</span>
                    <span class="sidebar-tag">${toDoTag}</span>
                    <button class="delete-to-do">Delete</button>
                `;
                toDoList.appendChild(toDoItem);

                const deleteBtn = toDoItem.querySelector('.delete-to-do');
                deleteBtn.addEventListener('click', function() {
                    toDoList.removeChild(toDoItem);
                });

                addToDoModal.style.display = 'none';
            });

            // Load profile information from local storage
            const profileName = document.getElementById('profile-name');
            const profilePic = document.getElementById('profile-pic');

            profileName.textContent = localStorage.getItem('name') || 'Your Name';
            const profilePicUrl = localStorage.getItem('profilePicture');
            if (profilePicUrl) {
                profilePic.src = profilePicUrl;
            } else {
                profilePic.src = 'default-profile-pic.png'; // Path to a default profile picture
            }

            const editProfileForm = document.getElementById('editProfileForm');
            editProfileForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('username').value;
                const name = document.getElementById('name').value;
                const profilePicture = document.getElementById('profilePicture').files[0];
                const newPassword = document.getElementById('newPassword').value;

                localStorage.setItem('username', username);
                localStorage.setItem('name', name);

                if (profilePicture) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        localStorage.setItem('profilePicture', e.target.result);
                        profilePic.src = e.target.result;
                    };
                    reader.readAsDataURL(profilePicture);
                }

                if (newPassword) {
                    localStorage.setItem('password', newPassword);
                }

                profileName.textContent = name;

                editProfileModal.style.display = 'none';
            });
        });
    </script>
    <script src="dashboard.js"></script>
</body>
</html>